# Arduino Radio

The Arduino Radio is an FM radio built for the Dawson College MakerSPACE Internship as a
semester-long project. It contains an LCD display for displaying band and frequency, supports preset saving and tuning, and is packaged in a small portable box so that it can be brought around easily. 

## Overview and Features

- Powered by a rechargeable power bank
- Frequency tuning via a rotary encoder
- LCD display for displaying current band and frequency
- Volume control
- Two speakers
- Preset saving
- Last tuned station saved for next power up
- Telescopic antenna
- Green and blue box, with black backplate

## Project Structure

```
arduino-radio-project/
‚îÇ
‚îú‚îÄ‚îÄ src/             # Where the code is located
‚îú‚îÄ‚îÄ R_resources/     # Important resources
‚îú‚îÄ‚îÄ R_images/        # Images of the final radio
‚îú‚îÄ‚îÄ R_finalreport/   # The final report for the project
‚îú‚îÄ‚îÄ R_assignments/   # Formal assignments done for the project (and their iterations)
‚îú‚îÄ‚îÄ R_slideshow/     # Slideshow for the presentation from May 30th, 2024
‚îú‚îÄ‚îÄ R_oldcode/       # Old iterations of code before version control
‚îú‚îÄ‚îÄ R_other/         # Miscellaneous files; unimportant
‚îú‚îÄ‚îÄ R_todo.txt       # General todo list
‚îú‚îÄ‚îÄ LICENSE          # MIT License file 
‚îî‚îÄ‚îÄ README.md        # This file
```
There are other files/folders too which were generated by PlatformIO, an extension that enables Arduino support in VSCode, which aren't listed here.

Also, in some of the above folders, there is a CONTENTS.txt file which details all the files/other folders found in that folder.

## Getting Started

Below are instructions for getting the radio working yourself, if you wish.

### Prerequisites

- Visual Studio Code
- The [PlatformIO extension](https://platformio.org/) for VS Code installed
- The libraries outlined below in [Libraries Used](#libraries-used)
- All the necessary hardware (this can be found in [`R_resources/HardwareLinks.txt`](R_resources/HardwareLinks.txt). Look under the section MAIN HARDWARE

### Installation

```
# Clone the repository
git clone https://github.com/james-dire-1/arduino-radio-project.git

# Navigate to project directory
cd arduino-radio-project
```

### Setting things up

‚ö†Ô∏è WARNING: This project overwrites some sections of Arduino EEPROM. Make sure you have nothing important saved in the memory addresses indicated in the code. Also, make sure that the amplifier volume knob is turned down to not have any surprise loud noises on power up.

First, set up the radio circuit as detailed in the circuit diagram (this can be found in [`R_resources/CircuitDiagram.png`](R_resources/CircuitDiagram.png)).
Upload the code onto the Arduino via the Upload tool provided by PlatformIO.
The radio is now ready to go!

### How to use

Extend the antenna for optimal reception. (Although, the radio should still work fine even if the antenna is not extended; it even works without the antenna!)

Use the rotary encoder to switch between frequencies.

Use the joystick to change between presets. Up, down, left, and right correspond to different presets.

Use the knob on the amplifier to change the volume. (But don't raise the volume too high, as audio distortion occurs at high volumes.)

Hold down on the rotary encoder for a few seconds to overwrite any preset. Once the scrolling prompt appears, move the joystick in the direction of the preset you wish to overwrite.

Congratulations, you are now an expert user of the Arduino Radio!

## Advanced Section!

If you would like to package your radio into a portable box, there are model files that can be 3D printed which are found in üî¥TO-DO. However, it is recommended that you design your own box for the radio components, as the designs provided in the model files have many flaws and problems to them.

## Libraries Used

### For LCDs
- [hd44780](https://github.com/duinoWitchery/hd44780/tree/master) by Bill Perry. Contains functions like `setCursor(0, 0)`, `print("")`, and `clear()`

### For rotary encoders
- [RotaryEncoder](https://github.com/mathertel/RotaryEncoder/tree/master) by Matthias Hertel. Contains functions like `tick()` and `getDirection()`

### Extra snippet of code
Also, a snippet of code from Kevin Darrah's YouTube video (linked below in [Videos for inspiration](#videos-for-inspiration)) was used for this project. This code is pasted directly into the RadioModule class. Kevin Darrah mentions in the video that this snippet of code came from Simon Monk's library 
(linked further below).

## Final Report

A final report was written for this project. It can be found in [`R_finalreport/RadioFinalReport.md`](R_finalreport/RadioFinalReport.md).

## License

This Arduino radio project is licensed under the [MIT License](LICENSE).

## Acknowledgments

### Websites for inspration
- [Simple TEF6686 Arduino + PC AM-FM Radio Receiver](https://www.instructables.com/Simple-TEF6686-Arduino-PC-AM-FM-Radio-Receiver/)
- [All Band Receiver With SI4732 / SI4735 (FM / RDS, AM and SSB) With Arduino](https://www.instructables.com/All-Band-Receiver-With-Si4735-FM-RDS-AM-and-SSB-Wi/)

### Videos for inspiration
- [Building a MIDI Controller Using Arduino](https://www.youtube.com/watch?v=JZ5yPdoPooU&t=654s)
- [Make your own FM Radio - Part 1](https://www.youtube.com/watch?v=RqyhvlMKt14) 
- [How To Make FM RADIO using Arduino | TEA5767](https://www.youtube.com/watch?v=Xy7k_ZvcVhU) 
- [Simple & Cheap Arduino FM Radio! - Tutorial + Code](https://www.youtube.com/watch?v=n1hPj2wfsnA) 

### Instructional videos and links used
- [How I2C Communication Works and How To Use It with Arduino](https://www.youtube.com/watch?v=6IAkYpmA1DQ)
- [Using LCD Displays with Arduino](https://www.youtube.com/watch?v=wEbGhYjn4QI)
- [Using Rotary Encoders with Arduino](https://www.youtube.com/watch?v=V1txmR8GXzE)
- [ROTARY ENCODER WITH INTERRUPTS - Arduino tutorial #12](https://www.youtube.com/watch?v=gPLpPFmv-Zc) (not really used)
- [Pin Change Interrupts](https://gammon.com.au/forum/?id=11488&reply=6#reply6) (not really used)
- [Powering Arduino With a Battery](https://www.instructables.com/Powering-Arduino-with-a-Battery/)
- [How to program Arduino with VSCode](https://www.youtube.com/watch?v=gQ2lsSuXvVU)
- [A guide to EEPROM](https://docs.arduino.cc/learn/programming/eeprom-guide/)
- [C++ Tutorial Series](https://www.youtube.com/playlist?list=PLlrATfBNZ98dudnM48yfGUldqGD0S4FFb)

## Plans for Future Expansion

At the moment, there are no plans for future expansion. However, if we do come back to it (of which there is a fair chance of happening), we will attempt to add support for the features that we didn't get the chance to add throughout the semester, which include:

- AM and shortwave support
- Station scanning
- RDS (allows for printing of song title and station name)
- Bluetooth connectivity (so you can listen to songs from your phone, if you don't like whatever is playing on the radio for whatever reason)
- A settings screen with various options for audio
- More presets!

## Libraries We May Consider Using

There exist some libraries that could be useful for the future expansion.

### For TEA5767 FM module
- [Radio by Matthias Hertel](https://github.com/mathertel/Radio) 
- [arduino_TEA5767 by Simon Monk](https://github.com/simonmonk/arduino_TEA5767) 

### For TEF6686 AM and FM module
- [TEF6686Library by ciuri](https://github.com/ciuri/TEF6686Library) (seems to be particularly useful!)